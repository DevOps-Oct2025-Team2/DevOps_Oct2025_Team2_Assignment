{% extends "base.html" %}
{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="card">
  <h2>Admin Dashboard</h2>
  <p class="muted">Manage registered user accounts.</p>

  <h3 style="margin-top:18px;">Create User</h3>
  <form class="form-row" method="POST" action="/admin/create_user">
    <input name="username" placeholder="New username" required>
    <input name="password" type="password" placeholder="New password" required>
    <button class="btn btn-primary" type="submit">Create</button>
  </form>
</div>

<div class="card" style="margin-top:14px;">
  <h3>All Users</h3>

  <table class="table">
    <thead>
      <tr>
        <th>ID</th><th>Username</th><th>Role</th><th>Created</th><th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for u in users %}
      <tr>
        <td>{{ u["id"] }}</td>
        <td>{{ u["username"] }}</td>
        <td>{{ u["role"] }}</td>
        <td>{{ u["created_at"] }}</td>
        <td>
          <form method="POST" action="/admin/delete_user/{{ u['id'] }}" onsubmit="return confirm('Delete this user?')">
            <button class="btn btn-danger" type="submit">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
